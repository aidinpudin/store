{"ast":null,"code":"var _jsxFileName = \"/Users/aidinrodriguez/Documents/Codearock/devrockstore/devrock-store/src/context/UsarContexto.js\",\n  _s = $RefreshSig$();\nimport { useReducer } from \"react\";\nimport axios from \"axios\";\nimport Contexto from \"./Contexto\";\nimport Reducer from \"./Reducer\";\nimport { initializeApp } from \"firebase/app\";\nimport { getDatabase, ref, onValue, push } from \"firebase/database\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function UsarContexto(props) {\n  _s();\n  // Your web app's Firebase configuration\n  const firebaseConfig = {\n    apiKey: \"AIzaSyAcIPb2oB8uaKz1Ac8RTYK_l2pihkVtOUA\",\n    authDomain: \"aidin-pudin.firebaseapp.com\",\n    projectId: \"aidin-pudin\",\n    storageBucket: \"aidin-pudin.appspot.com\",\n    messagingSenderId: \"256465140496\",\n    appId: \"1:256465140496:web:c3f1d5327731edcd08c395\"\n  };\n  // Initialize Firebase\n  const app = initializeApp(firebaseConfig);\n  const db = getDatabase();\n  const refe = ref(db, \"productos/\");\n  const {\n    children\n  } = props;\n  const estadoInicial = {\n    productos: [],\n    carrito: []\n  };\n  const [state, dispatch] = useReducer(Reducer, estadoInicial);\n  const listameProductos = async () => {\n    const res = await axios.get(\"https://devrockstore-default-rtdb.firebaseio.com/productos.json\");\n    onValue(refe, snap => {\n      console.log(snap.val(), \"desde Firebase\");\n      dispatch({\n        type: \"LISTAME_PRODUCTOS\",\n        payload: snap.val()\n      });\n    });\n    // console.log(res.data, \"desde UsarContexto()\")\n  };\n\n  const agregarCarrito = id => {\n    console.log('en agregarCarrito', id);\n    let index = state.carrito.findIndex(item => item.id === id);\n    if (index >= 0) {\n      state.carrito[index].cant++;\n      dispatch({\n        type: \"SETEAR_CARRITO\",\n        payload: state.carrito\n      });\n    } else {\n      dispatch({\n        type: \"AGREGAR_CARRITO\",\n        payload: id\n      });\n    }\n  };\n  const sumarCarrito = (id, numero) => {\n    console.log('en sumarCarrito', id, numero);\n    let index = state.carrito.findIndex(item => item.id === id);\n    if (index >= 0) {\n      state.carrito[index].cant += numero;\n      if (state.carrito[index].cant === 0) dispatch({\n        type: \"ELIMINAR_CARRITO\",\n        payload: id\n      });else dispatch({\n        type: \"SETEAR_CARRITO\",\n        payload: state.carrito\n      });\n    }\n  };\n  const eliminarCarrito = id => {\n    console.log('eliminar carrito', id);\n    dispatch({\n      type: \"ELIMINAR_CARRITO\",\n      payload: id\n    });\n  };\n  const guardarCompra = compra => {\n    // seteo la compra en la db\n    //push(refCompras, compra)\n\n    // vacio el carrito\n    dispatch({\n      type: \"SETEAR_CARRITO\",\n      payload: []\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Contexto.Provider, {\n    value: {\n      productos: state.productos,\n      carrito: state.carrito,\n      listameProductos,\n      agregarCarrito,\n      eliminarCarrito,\n      sumarCarrito,\n      guardarCompra\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 9\n  }, this);\n}\n_s(UsarContexto, \"VuCBfBW3M6KPLSvZu0EqEj1AGQo=\");\n_c = UsarContexto;\nvar _c;\n$RefreshReg$(_c, \"UsarContexto\");","map":{"version":3,"names":["useReducer","axios","Contexto","Reducer","initializeApp","getDatabase","ref","onValue","push","jsxDEV","_jsxDEV","UsarContexto","props","_s","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","db","refe","children","estadoInicial","productos","carrito","state","dispatch","listameProductos","res","get","snap","console","log","val","type","payload","agregarCarrito","id","index","findIndex","item","cant","sumarCarrito","numero","eliminarCarrito","guardarCompra","compra","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/aidinrodriguez/Documents/Codearock/devrockstore/devrock-store/src/context/UsarContexto.js"],"sourcesContent":["import { useReducer } from \"react\"\nimport axios from \"axios\";\nimport Contexto from \"./Contexto\";\nimport Reducer from \"./Reducer\"\nimport { initializeApp } from \"firebase/app\";\nimport {getDatabase, ref, onValue, push} from \"firebase/database\"\n\n\nexport default function UsarContexto(props) {\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n    apiKey: \"AIzaSyAcIPb2oB8uaKz1Ac8RTYK_l2pihkVtOUA\",\n    authDomain: \"aidin-pudin.firebaseapp.com\",\n    projectId: \"aidin-pudin\",\n    storageBucket: \"aidin-pudin.appspot.com\",\n    messagingSenderId: \"256465140496\",\n    appId: \"1:256465140496:web:c3f1d5327731edcd08c395\"\n};\n  // Initialize Firebase\nconst app = initializeApp(firebaseConfig);\nconst db = getDatabase()\nconst refe = ref(db, \"productos/\")\n\n    const { children } = props\n    const estadoInicial = {\n        productos:[],\n        carrito:[],\n    }\n    const [state, dispatch] = useReducer(Reducer, estadoInicial)\n    const listameProductos = async ()=>{\n        const res = await axios.get(\n            \"https://devrockstore-default-rtdb.firebaseio.com/productos.json\"\n            )\n            onValue(refe, (snap)=>{\n                console.log(snap.val(), \"desde Firebase\")\n                dispatch({type: \"LISTAME_PRODUCTOS\", payload: snap.val()})\n            })\n           // console.log(res.data, \"desde UsarContexto()\")\n    }\n    const agregarCarrito = (id) => {\n        console.log('en agregarCarrito',id)\n        let index = state.carrito.findIndex( item => item.id===id)\n        if (index >= 0) {      \n            state.carrito[index].cant++                        \n            dispatch({type: \"SETEAR_CARRITO\", payload: state.carrito})\n        }\n        else {\n            dispatch({type: \"AGREGAR_CARRITO\", payload: id})      \n        }    \n    }\n\n    const sumarCarrito = (id,numero) => {\n        console.log('en sumarCarrito',id, numero)\n        let index = state.carrito.findIndex( item => item.id===id)\n        if (index >= 0) {      \n            state.carrito[index].cant+=numero\n            if (state.carrito[index].cant===0)\n                dispatch({type: \"ELIMINAR_CARRITO\", payload: id})\n            else    \n                dispatch({type: \"SETEAR_CARRITO\", payload: state.carrito})\n        }\n    }\n\n    const eliminarCarrito = (id) => {\n        console.log('eliminar carrito',id)\n        dispatch({type: \"ELIMINAR_CARRITO\", payload: id})\n    }\n    \n    const guardarCompra = (compra) => {\n        // seteo la compra en la db\n        //push(refCompras, compra)\n\n        // vacio el carrito\n        dispatch({type: \"SETEAR_CARRITO\", payload: []})\n    }\n    \n    return (\n        <Contexto.Provider value={{\n            productos: state.productos,\n            carrito: state.carrito,\n            listameProductos,\n            agregarCarrito,\n            eliminarCarrito,\n            sumarCarrito,\n            guardarCompra,\n        }}\n        >\n            {children}\n            </Contexto.Provider>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}