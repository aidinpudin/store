{"ast":null,"code":"import _regeneratorRuntime from\"/Users/aidinrodriguez/Documents/Codearock/devrockstore/devrock-store/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/aidinrodriguez/Documents/Codearock/devrockstore/devrock-store/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/aidinrodriguez/Documents/Codearock/devrockstore/devrock-store/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useReducer}from\"react\";import Contexto from\"./Contexto\";import Reducer from\"./Reducer\";// Import the functions you need from the SDKs you need\nimport{initializeApp}from\"firebase/app\";import{getDatabase,ref,onValue,push}from\"firebase/database\";// Your web app's Firebase configuration\nimport{jsx as _jsx}from\"react/jsx-runtime\";var firebaseConfig={apiKey:\"AIzaSyAcIPb2oB8uaKz1Ac8RTYK_l2pihkVtOUA\",authDomain:\"aidin-pudin.firebaseapp.com\",projectId:\"aidin-pudin\",storageBucket:\"aidin-pudin.appspot.com\",messagingSenderId:\"256465140496\",appId:\"1:256465140496:web:c3f1d5327731edcd08c395\"};// Initialize Firebase\nvar app=initializeApp(firebaseConfig);var db=getDatabase();var refProductos=ref(db,'productos/');var refCompras=ref(db,'compras');export default function UsarContexto(props){var children=props.children;var estadoInicial={productos:[],carrito:[]};var _useReducer=useReducer(Reducer,estadoInicial),_useReducer2=_slicedToArray(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1];var listameProductos=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:onValue(refProductos,function(snap){var data=snap.val();console.log(data,'desde firebase');dispatch({type:\"LISTAME_PRODUCTOS\",payload:data});});// console.log(res.data, \"desde UsarContexto()\")\ncase 1:case\"end\":return _context.stop();}},_callee);}));return function listameProductos(){return _ref.apply(this,arguments);};}();var agregarCarrito=function agregarCarrito(id){console.log('en agregarCarrito',id);var index=state.carrito.findIndex(function(item){return item.id===id;});if(index>=0){state.carrito[index].cant++;dispatch({type:\"SETEAR_CARRITO\",payload:state.carrito});}else{dispatch({type:\"AGREGAR_CARRITO\",payload:id});}};var sumarCarrito=function sumarCarrito(id,numero){console.log('en sumarCarrito',id,numero);var index=state.carrito.findIndex(function(item){return item.id===id;});if(index>=0){state.carrito[index].cant+=numero;if(state.carrito[index].cant===0)dispatch({type:\"ELIMINAR_CARRITO\",payload:id});else dispatch({type:\"SETEAR_CARRITO\",payload:state.carrito});}};var eliminarCarrito=function eliminarCarrito(id){console.log('eliminar carrito',id);dispatch({type:\"ELIMINAR_CARRITO\",payload:id});};var guardarCompra=function guardarCompra(compra){// seteo la compra en la db\n//push(refCompras, compra)\n// vacio el carrito\ndispatch({type:\"SETEAR_CARRITO\",payload:[]});};return/*#__PURE__*/_jsx(Contexto.Provider,{value:{productos:state.productos,carrito:state.carrito,listameProductos:listameProductos,agregarCarrito:agregarCarrito,eliminarCarrito:eliminarCarrito,sumarCarrito:sumarCarrito,guardarCompra:guardarCompra},children:children});}","map":{"version":3,"names":["useReducer","Contexto","Reducer","initializeApp","getDatabase","ref","onValue","push","jsx","_jsx","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","app","db","refProductos","refCompras","UsarContexto","props","children","estadoInicial","productos","carrito","_useReducer","_useReducer2","_slicedToArray","state","dispatch","listameProductos","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","snap","data","val","console","log","type","payload","stop","apply","arguments","agregarCarrito","id","index","findIndex","item","cant","sumarCarrito","numero","eliminarCarrito","guardarCompra","compra","Provider","value"],"sources":["/Users/aidinrodriguez/Documents/Codearock/devrockstore/devrock-store/src/context/UsarContexto.js"],"sourcesContent":["import { useReducer } from \"react\"\nimport Contexto from \"./Contexto\";\nimport Reducer from \"./Reducer\"\n\n// Import the functions you need from the SDKs you need\nimport { initializeApp } from \"firebase/app\";\nimport {getDatabase, ref, onValue, push} from \"firebase/database\"\n\n// Your web app's Firebase configuration\nconst firebaseConfig = {\n    apiKey: \"AIzaSyAcIPb2oB8uaKz1Ac8RTYK_l2pihkVtOUA\",\n    authDomain: \"aidin-pudin.firebaseapp.com\",\n    projectId: \"aidin-pudin\",\n    storageBucket: \"aidin-pudin.appspot.com\",\n    messagingSenderId: \"256465140496\",\n    appId: \"1:256465140496:web:c3f1d5327731edcd08c395\"\n};\n// Initialize Firebase\nconst app = initializeApp(firebaseConfig);\n\nconst db = getDatabase()\nconst refProductos = ref(db,'productos/')\nconst refCompras = ref(db,'compras')\n\nexport default function UsarContexto(props) {\n    const { children } = props\n    const estadoInicial = {\n        productos:[],\n        carrito:[],\n    }\n\n    const [state, dispatch] = useReducer(Reducer, estadoInicial)\n\n    const listameProductos = async ()=>{\n            onValue(refProductos, (snap)=>{\n                let data = snap.val()\n                console.log(data, 'desde firebase')\n                dispatch({type: \"LISTAME_PRODUCTOS\", payload: data})\n            })\n           // console.log(res.data, \"desde UsarContexto()\")\n    }\n    const agregarCarrito = (id) => {\n        console.log('en agregarCarrito',id)\n        let index = state.carrito.findIndex( item => item.id===id)\n        if (index >= 0) {      \n            state.carrito[index].cant++                        \n            dispatch({type: \"SETEAR_CARRITO\", payload: state.carrito})\n        }\n        else {\n            dispatch({type: \"AGREGAR_CARRITO\", payload: id})      \n        }    \n    }\n\n    const sumarCarrito = (id,numero) => {\n        console.log('en sumarCarrito',id, numero)\n        let index = state.carrito.findIndex( item => item.id===id)\n        if (index >= 0) {      \n            state.carrito[index].cant+=numero\n            if (state.carrito[index].cant===0)\n                dispatch({type: \"ELIMINAR_CARRITO\", payload: id})\n            else    \n                dispatch({type: \"SETEAR_CARRITO\", payload: state.carrito})\n        }\n    }\n\n    const eliminarCarrito = (id) => {\n        console.log('eliminar carrito',id)\n        dispatch({type: \"ELIMINAR_CARRITO\", payload: id})\n    }\n    \n    const guardarCompra = (compra) => {\n        // seteo la compra en la db\n        //push(refCompras, compra)\n\n        // vacio el carrito\n        dispatch({type: \"SETEAR_CARRITO\", payload: []})\n    }\n    \n    return (\n        <Contexto.Provider value={{\n            productos: state.productos,\n            carrito: state.carrito,\n            listameProductos,\n            agregarCarrito,\n            eliminarCarrito,\n            sumarCarrito,\n            guardarCompra,\n        }}\n        >\n            {children}\n            </Contexto.Provider>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}